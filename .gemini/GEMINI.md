# 応答する言語について
私は日本語しか使えないので応答はすべて日本語でお願いします。

# Goの関数型プログラミングルール
## 目的
- 純粋関数を最大化する
- ミュータブルな状態を最小化する
- 副作用を明示的な境界に閉じ込める

## 状態管理
- グローバル変数は禁止
- package レベルのミュータブルな状態は禁止
- すべての状態は main() または app.Run() に所有させる
- struct は不変フィールドを優先する
- ミュータブルなフィールドは最小限にし、理由を明示する

## 関数設計
- 可能な限り「入力 → 出力」の形にする
- 純粋関数では I/O・ログ出力・Win32 API 呼び出しを行わない
- 副作用は責務が明確な関数に隔離する
- bool フラグによる状態分岐は禁止
- 状態分岐には enum や定数を使用する

## 定数・列挙
- マジックナンバーは禁止
- Win32 のメッセージIDやフラグは const として定義する
- 同一の文字列リテラルを複数箇所に書かない

## エラーハンドリング
- エラーは値として扱い、明示的に返す
- 副作用を持つ関数のみ error を返してよい
- 純粋関数は error を返さない

## コールバック・クロージャ
- Win32 コールバックで状態をキャプチャしてはならない
- 必要なデータは引数として明示的に渡す
- 重要なロジックで無名関数を使わない

## 並行処理
- Phase1 では goroutine を禁止
- Phase1 では channel を禁止
- 非同期処理は Phase2 以降に延期する

## 一般方針
- 小さく合成可能な関数を優先する
- 隠れた状態や暗黙的依存を作らない
- グローバルな文脈を知らなくても読めるコードにする

## テスト方針
- 純粋関数は必ずユニットテストを書く
- テストは標準の testing パッケージを使用する
- テーブル駆動テストを基本形とする
- 副作用を持つ関数は Phase1 ではテスト対象外とする
- mock / stub は使用しない
- テストケース名は仕様を文章で表現する

## 変数名や関数名の命名規則
- エクスポートされた識別子は CamelCase を使用します。
- エクスポートされていない識別子は小文字の CamelCase を使用します。
- 明示的に要求されない限り、識別子をエクスポートしないでください。
- go文化ではスコープが小さい変数は略語を利用しますが分かりづらいので略語は用いないでください。
    - 例えばmainWindowはmwと略さないでください。

## 定数の値について
- 以下2種類の値は`internal/config/config.go`に集約する
    - 複数のモジュールにまたがる値（アプリ名など）
    - アプリのユーザーから見て変更することで汎用性/利便性のある値（例:ダイアログのサイズや文面等）
- エラーメッセージを始めとして、その他モジュール内で完結する値に関してはハードコートOK